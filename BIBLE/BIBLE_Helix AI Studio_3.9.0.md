# Helix AI Studio - Project Bible (包括的マスター設計書)

**バージョン**: 3.9.0
**アプリケーションバージョン**: 3.9.0 "Helix AI Studio - UI再編・コスト最適化"
**作成日**: 2026-02-02
**最終更新**: 2026-02-02
**目的**: プロジェクトの全容・経緯・設計思想を1ファイルで完全に把握するための聖典

---

## v3.9.0 更新履歴 (2026-02-02)

### UI再編・コスト最適化アップデート

**概要**:
v3.9.0 はUI構成を大幅に再編し、使いやすさとコスト効率を向上。
Gemini Designer を削除し、各タブにサブタブ（チャット/設定）を導入。

**設計思想**:
- **シンプル化**: 不要な機能を削除し、コア機能に集中
- **統合化**: 関連設定を各タブのサブタブに統合
- **コスト最適化**: Gemini関連を削除、Ollama活用を強化

---

## タブ構成 (v3.9.0)

### 新タブ構成 (4タブ)

| # | タブ名 | サブタブ | 説明 |
|---|--------|----------|------|
| 1 | 🤖 Claude | チャット / 設定 | AIチャット＆設定統合 |
| 2 | 🔀 LLMmix | チャット / 設定 | マルチLLMオーケストレーション |
| 3 | 📝 チャット作成 | - | チャット原稿の作成・編集 |
| 4 | ⚙️ 一般設定 | - | アプリ全体の設定 |

### 旧タブ構成 (v3.8.0: 5タブ) → 新タブ構成への移行

| 旧タブ | 新タブ | 変更内容 |
|--------|--------|----------|
| 🤖 Claude Code | 🤖 Claude | 名前変更、サブタブ追加 |
| 🎨 Gemini Designer | (削除) | 開発-保管所にバックアップ |
| ⚙️ Cortex | ⚙️ 一般設定 | 大幅簡略化 |
| 🌀 Helix Orchestrator | 🔀 LLMmix | 名前変更、サブタブ追加 |
| 📝 Chat Creation | 📝 チャット作成 | 日本語化 |

---

## 各タブの詳細

### 1. Claude タブ (旧 Claude Code)

**サブタブ**:
- **チャット**: AIとの対話（従来のClaudeタブ機能）
- **設定**: API/CLI認証、Ollama設定、MCPサーバー管理

**設定サブタブの機能**:

| 機能 | 説明 |
|------|------|
| API/CLI認証 | ANTHROPIC_API_KEY設定、Claude CLIステータス確認 |
| Ollama設定 | ホストURL、使用モデル、接続テスト |
| MCPサーバー管理 | ファイルシステム、Git、Brave検索等の有効/無効 |
| Claudeモデル設定 | デフォルトモデル、タイムアウト設定 |

### 2. LLMmix タブ (旧 Helix Orchestrator)

**サブタブ**:
- **チャット**: オーケストレーション実行
- **設定**: 7役割ごとのモデル選択（TrinityのMODELSタブ形式）

**設定サブタブの機能**:

| 機能 | 説明 |
|------|------|
| Ollama接続 | ホストURL、接続テスト、モデル一覧取得 |
| Ollamaモデル一覧 | 利用可能なモデルをテーブル表示 |
| 7役割モデル割り当て | 各役割にClaude/Ollamaモデルを割り当て |
| 役割テスト | 各役割のモデルを個別テスト |
| モデル設定確定 | 設定を保存し、次回起動時に復元 |

**7役割の説明**:

| 役割 | 推奨 | 責務 |
|------|------|------|
| Supervisor | 高性能 | 全体統括、計画→役割割当→完遂 |
| Router | 軽量 | 意図分類、軽量/重量切替 |
| Planner | 中〜高性能 | 手順化、タスク分解 |
| Researcher | 中性能 | 検索・根拠収集 |
| Executor | 中性能 | ファイル操作/コマンド実行 |
| Reviewer | 高性能 | 検証・差分レビュー |
| Summarizer | 中性能 | 最終回答統合 |

### 3. チャット作成 タブ

ユーザーがチャット原稿を作成・編集するための専用タブ。
AIからの返信は反映されない（ユーザー作成原稿専用）。

### 4. 一般設定 タブ (旧 Cortex)

アプリ全体の設定を管理する簡略化されたタブ。

**機能**:
- 表示とテーマ設定（ダークモード、フォントサイズ）
- 自動化設定（自動保存、コンテキスト自動読み込み）
- Knowledge（知識ベース）
- Encyclopedia（百科事典）

---

## 削除された機能

| 機能 | 理由 |
|------|------|
| Gemini Designer タブ | コスト最適化、使用頻度低 |
| スクリーンキャプチャ機能 | 外部ツールで代替可能 |
| 予算管理機能 | 実装が複雑、使用頻度低 |
| Local接続タブ | Claudeタブ設定に統合 |
| Gemini関連UI/機能 | コスト最適化 |

---

## ファイル変更一覧

| ファイル | 変更内容 |
|----------|----------|
| `src/main_window.py` | タブ構成変更、Gemini削除、タブ順序変更 |
| `src/tabs/claude_tab.py` | サブタブ化（チャット/設定）、設定UI追加 |
| `src/tabs/helix_orchestrator_tab.py` | LLMmixに改名、サブタブ化、モデル選択UI |
| `src/tabs/settings_cortex_tab.py` | 大幅簡略化（不要機能削除） |
| `src/utils/constants.py` | バージョン 3.8.0 → 3.9.0 |
| `CHANGELOG.md` | v3.9.0更新履歴追加 |

---

## バックアップ

削除されたファイルは以下にバックアップ:

```
開発-保管所/GeminiDesigner_backup_20260202/
├── gemini_designer_tab.py
├── gemini_backend.py
├── ui_designer/
│   ├── ui_refiner.py
│   ├── layout_analyzer.py
│   └── qss_generator.py
└── settings_cortex_tab_backup.py
```

---

## 技術スタック (継続)

| カテゴリ | 技術 |
|----------|------|
| GUI | PyQt6 |
| AI API | Anthropic Claude API, Claude CLI |
| ローカルLLM | Ollama |
| MCP | Model Context Protocol |
| データ永続化 | JSON, SQLite |

---

## 今後の展望

1. **LLMmix強化**: 実際のLLM呼び出し実装（現在はシミュレーション）
2. **Ollama統合深化**: より多くのOllamaモデルへの対応
3. **パフォーマンス最適化**: 起動速度、メモリ使用量の改善
